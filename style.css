/* [1] 공통 스타일 */
:root {
    --mv-blue-deep: #00498c;
    --mv-blue-light: #0072ce;
    --mv-yellow: #ffc600;
    --mv-orange: #ff9e1b;
    --bg-color: #f4f7fa;
}
body { font-family: 'Pretendard', sans-serif; background-color: var(--bg-color); margin: 0; padding: 20px; color: #333; }
.container { max-width: 900px; margin: 0 auto; }

/* 버튼 */
.btn { border: none; padding: 8px 12px; border-radius: 8px; font-weight: bold; cursor: pointer; color: white; font-size: 14px; margin-right: 2px; display: inline-flex; align-items: center; gap: 4px; white-space: nowrap; }
.btn:hover { opacity: 0.9; transform: translateY(-1px); }
.btn-primary { background: var(--mv-blue-light); }
.btn-success { background: var(--mv-orange); } 
.btn-dark { background: #455a64; }
.btn-danger { background: #e74c3c; }
.btn-drive { background: #00897b; } 
.btn-fame { background: #ffd700; color: #333; } 
.btn-purple { background: #7e57c2; }
.btn-setup-big { width: 48%; padding: 12px; margin-top: 10px; }

/* 화면 전환 */
.screen { display: none; }
.active-screen { display: block; animation: fadeIn 0.4s; }
@keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

/* [화면 1] 설정 */
.setup-card { background: white; padding: 40px; border-radius: 20px; max-width: 600px; margin: 30px auto; box-shadow: 0 10px 30px rgba(0,0,0,0.1); text-align: center; }
.logo-uploader { margin-bottom: 20px; padding: 15px; background: #f8f9fa; border-radius: 10px; border: 1px dashed #ccc; }
.stock-config-area { margin-bottom: 20px; padding: 15px; background: #eef6ff; border-radius: 10px; border: 1px solid #dbeafe; }
.stock-config-title { font-weight: bold; color: var(--mv-blue-deep); margin-bottom: 10px; text-align: left; font-size: 15px; }
.stock-inputs-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; }
.stock-input-item { display: flex; flex-direction: column; align-items: center; }
.stock-input-item label { font-size: 12px; color: #555; margin-bottom: 3px; font-weight: bold; }
.stock-input-item input { width: 80%; padding: 5px; border: 1px solid #ccc; border-radius: 5px; text-align: center; font-size: 14px; }
.mode-select { display: flex; justify-content: center; gap: 15px; margin: 20px 0; }
.mode-btn { width: 120px; padding: 15px; border: 2px solid #ddd; border-radius: 12px; cursor: pointer; background: #fff; font-weight: bold; color: #888; font-size: 16px; }
.mode-btn.selected { border-color: var(--mv-blue-deep); background: #eef6ff; color: var(--mv-blue-deep); }
.input-row { margin: 20px 0; font-size: 18px; font-weight: bold; display: flex; align-items: center; justify-content: center; gap: 10px; }
.input-num { width: 60px; padding: 5px; text-align: center; border: 1px solid #ccc; border-radius: 5px; font-size: 18px; }
.player-list-input { text-align: left; max-height: 250px; overflow-y: auto; margin-top: 20px; border-top: 1px solid #eee; padding-top: 15px; }
.p-input-group { display: flex; gap: 10px; margin-bottom: 8px; align-items: center; }
.p-input-group input { flex: 1; padding: 8px; border: 1px solid #ccc; border-radius: 5px; }
.team-header { font-weight: bold; color: var(--mv-blue-deep); margin-top: 15px; margin-bottom: 5px; border-bottom: 1px solid #eee; padding-bottom: 5px;}

/* [화면 2] 계수 */
.dashboard-layout { display: grid; grid-template-columns: 220px 1fr; gap: 20px; }
.sidebar { background: white; padding: 20px; border-radius: 15px; height: fit-content; }
.player-list-item { padding: 10px; margin-bottom: 5px; border-radius: 8px; cursor: pointer; background: #f9f9f9; display: flex; justify-content: space-between; }
.player-list-item.active { background: #eef6ff; color: var(--mv-blue-deep); font-weight: bold; border-left: 4px solid var(--mv-blue-deep); }
.player-list-item.done span { background: var(--mv-yellow); color: #333; font-weight: bold; }
.count-card { background: white; border-radius: 15px; padding: 25px; margin-bottom: 15px; box-shadow: 0 4px 10px rgba(0,0,0,0.05); }
.portfolio-grid-sm { display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; }
.stock-item-sm { border: 1px solid #eee; border-radius: 8px; padding: 8px; text-align: center; font-size: 13px; }

/* [화면 3] 성적표 & [화면 4] 명예의 전당 공통 Paper */
.report-controls { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; background: #333; padding: 15px; border-radius: 10px; color: white; flex-wrap: nowrap; overflow-x: auto; }

.report-paper {
    background: white; width: 210mm; 
    /* 화면상 높이 (A4 비율) */
    min-height: 296mm; 
    margin: 0 auto; padding: 12mm 15mm; 
    box-sizing: border-box; box-shadow: 0 10px 30px rgba(0,0,0,0.15); 
    border-top: 8px solid var(--mv-blue-deep);
    display: flex; flex-direction: column; position: relative;
}

.editable-input { border: none; border-bottom: 1px dashed #ccc; font-weight: bold; color: inherit; font-size: inherit; text-align: right; width: 80px; background: transparent; padding: 0 2px; }
.editable-input:focus { outline: none; border-bottom: 2px solid var(--mv-orange); background: #fffbe6; }
.editable-date { border: none; font-size: 16px; font-weight: bold; color: #333; font-family: inherit; text-align: left; width: 120px; background: transparent; border-bottom: 1px dashed #ccc; margin-left: 0; }
.editable-text { border: none; font-size: 18px; font-weight: bold; color: #333; font-family: inherit; text-align: left; width: 120px; background: transparent; border-bottom: 1px dashed #ccc; margin-left: 0; }

.report-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 10px; border-bottom: 2px solid #eee; padding-bottom: 5px; }
.header-title h1 { margin: 0; font-size: 34px; color: var(--mv-blue-deep); font-weight: 900; letter-spacing: -1px; }
.header-title p { margin: 4px 0 0; color: #666; font-weight: bold; font-size: 15px; }
.header-right { text-align: right; }
.logo-img { height: 55px; margin-bottom: 5px; object-fit: contain; display: block; margin-left: auto; }
.header-info { font-size: 15px; color: #555; margin-top: 8px; } 
.info-row { margin-bottom: 6px; display: flex; justify-content: flex-end; align-items: center; } 
.info-label { font-weight: bold; margin-right: 8px; width: 45px; text-align: right; display: inline-block; }

.ranking-section { display: flex; gap: 15px; margin-bottom: 15px; height: 215px; }
.my-rank-card { flex: 0.8; background: #f9f9f9; border-radius: 12px; padding: 15px 15px; text-align: center; border: 1px solid #eee; display: flex; flex-direction: column; justify-content: center; }
.my-rank-title { font-size: 15px; color: #666; font-weight: bold; margin-bottom: 5px; }
.my-rank-num { font-size: 44px; font-weight: 900; color: var(--mv-blue-deep); line-height: 1; margin-bottom: 5px; }
.my-rank-suffix { font-size: 20px; color: #555; font-weight: bold; }
.my-team-rank-box { margin-top: 10px; background: white; padding: 8px; border-radius: 8px; border: 1px solid #eee; text-align: left; box-shadow: 0 2px 4px rgba(0,0,0,0.03); }
.team-detail-line { display: flex; justify-content: space-between; align-items: center; font-size: 13px; margin-bottom: 4px; }
.team-detail-line:last-child { margin-bottom: 0; padding-top: 4px; border-top: 1px dashed #eee; }
.team-hl { color: var(--mv-orange); font-weight: bold; font-size: 15px; }

.fame-card { flex: 1.4; background: #fff; border: 2px solid var(--mv-yellow); border-radius: 12px; padding: 15px; padding-bottom: 10px; display: flex; flex-direction: column; overflow: hidden; }
.fame-title { font-size: 13px; background: var(--mv-yellow); color: #333; padding: 4px 10px; border-radius: 4px; font-weight: bold; display: inline-block; margin-bottom: 15px; align-self: flex-start; }
.fame-split-container { display: flex; gap: 15px; height: 100%; width: 100%; }
.fame-col { flex: 1; }
.fame-col.separator { border-right: 1px dashed #ddd; padding-right: 15px; }
.fame-col-title { font-size: 13px; font-weight: 800; color: #666; border-bottom: 2px solid #eee; margin-bottom: 10px; padding-bottom: 2px; }
.top3-item { display: flex; justify-content: space-between; padding: 6px 0; border-bottom: 1px solid #f5f5f5; font-size: 13px; align-items: center;}
.rank-1st { color: #d4a000; font-weight:bold; } 
.rank-name { font-weight: bold; color: #333; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; max-width: 85px; }

.asset-box { display: flex; align-items: center; justify-content: space-between; background: linear-gradient(to right, #fcfcfc, #f4f8ff); border-radius: 12px; padding: 10px 25px; margin-bottom: 15px; border: 1px solid #eee; height: 95px; }
.asset-text .money { font-size: 38px; font-weight: 900; color: #333; letter-spacing: -1px; }
.asset-detail { margin-top: 3px; font-size: 13px; display: flex; align-items: center; }
.chart-container { position: relative; width: 90px; height: 90px; flex-shrink: 0; }
.chart-center { position: absolute; top: 0; left: 0; right: 0; bottom: 0; display: flex; flex-direction: column; justify-content: center; align-items: center; z-index: 10; pointer-events: none; }
.chart-center div:first-child { font-size: 9px; font-weight: bold; color: #666; line-height: 1.2; margin-bottom: 0px; }
.chart-center div:last-child { font-size: 15px; font-weight: 900; color: var(--mv-blue-deep); line-height: 1.2; }

.section-header { font-size: 16px; font-weight: 800; color: var(--mv-blue-deep); border-left: 6px solid var(--mv-yellow); padding-left: 10px; margin: 15px 0 8px 0; }
.portfolio-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; margin-bottom: 10px; }
.stock-card { border: 1px solid #ddd; border-radius: 10px; padding: 8px; text-align: center; background: #fff; }
.stock-logo { width: 28px; height: 28px; border-radius: 50%; margin: 0 auto 4px; color: white !important; display: flex; align-items: center; justify-content: center; font-weight: 900; font-size: 12px; -webkit-print-color-adjust: exact !important; print-color-adjust: exact !important; }
.stock-val { font-size: 15px; font-weight: 800; color: var(--mv-blue-deep); }
.stock-cnt { font-size: 12px; color: #888; }
.booth-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 8px; flex-grow: 1; }
.booth-item { border: 1px solid #eee; border-radius: 8px; padding: 5px 8px; display: flex; align-items: center; gap: 10px; background: #fbfbfb; }
.booth-icon { font-size: 30px; min-width: 35px; text-align: center; } 
.booth-text h4 { margin: 0; font-size: 14px; color: var(--mv-blue-deep); font-weight: 900; }
.booth-text p { margin: 1px 0 0; font-size: 12px; color: #555; line-height: 1.1; } 

/* [명예의 전당 레이아웃] */
.fame-only .section-title { 
    font-size: 20px; font-weight: 900; color: var(--mv-blue-deep); 
    border-left: 7px solid var(--mv-yellow); padding-left: 12px; 
    margin: 15px 0 8px 0; 
    display: flex; align-items: center; gap: 8px;
}
.ranking-table { width: 100%; border-collapse: collapse; margin-bottom: 5px; table-layout: fixed; }
.ranking-table th { 
    background: #f4f8ff; color: var(--mv-blue-deep); font-weight: 800; padding: 7px 5px; 
    text-align: center; border-bottom: 2px solid #dbeafe; font-size: 13px;
}
.ranking-table td { 
    padding: 7px 5px; border-bottom: 1px solid #eee; 
    vertical-align: middle; 
}
.rank-col { text-align: center; font-weight: 900; font-size: 16px; }
.rank-1 { color: #d4a000; font-size: 22px; } 
.rank-2 { color: #a6a6a6; font-size: 20px; } 
.rank-3 { color: #a05a2c; font-size: 18px; } 
.rank-other { color: #888; font-size: 14px; }

.name-col { font-weight: 800; color: #333; font-size: 15px; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; text-align: center; }
.asset-col { text-align: right; font-weight: 900; color: var(--mv-blue-deep); font-size: 15px; padding-right: 10px !important; }
.asset-col.top { color: #d4a000; font-size: 17px; } 
.sub-asset-col { text-align: right; color: #555; font-size: 12px; padding-right: 8px !important; }
.sub-asset-col.stock { color: #d32f2f; font-weight: bold; }
.date-col { text-align: center; color: #999; font-size: 12px; }
.member-col { font-size: 12px; color:#555; overflow:hidden; white-space:nowrap; text-overflow:ellipsis; font-weight: bold; }

/* 어워드 카드 */
.special-awards-container {
    display: flex; gap: 15px; margin: 10px 0;
    background: #f9f9f9; border: 1px dashed #ddd;
    border-radius: 12px; padding: 12px;
}
.award-card {
    flex: 1; background: white; border: 1px solid #eee; border-radius: 10px;
    padding: 10px 15px; display: flex; align-items: center;
    box-shadow: 0 2px 5px rgba(0,0,0,0.03);
}
.award-icon { font-size: 32px; margin-right: 15px; }
.award-info { flex: 1; }
.award-title { font-size: 12px; color: #666; font-weight: bold; text-transform: uppercase; margin-bottom: 2px; }
.award-name { font-size: 16px; font-weight: 900; color: #333; margin-bottom: 2px; }
.award-value { font-size: 14px; color: var(--mv-blue-deep); font-weight: 800; }
.hl-cash { color: #00897b; }
.hl-stock { color: #d32f2f; }

/* 푸터 */
.fame-footer {
    margin-top: auto; 
    padding-top: 15px; border-top: 2px dashed #eee;
    text-align: center; color: #666; font-size: 13px; font-weight: bold;
}
.fame-footer div:first-child { 
    font-size: 15px; color: var(--mv-blue-deep); font-weight: 900; margin-bottom: 5px; 
}

#loadingOverlay { position: absolute; top:0; left:0; width:100%; height:100%; background:rgba(255,255,255,0.9); display:none; justify-content:center; align-items:center; z-index:99; flex-direction:column; }

/* [수정] 인쇄 시 백지 오류 해결 (높이 및 오버플로우 강제 설정) */
@media print {
    @page {
        size: A4;
        margin: 0;
    }
    body, html {
        margin: 0;
        padding: 0;
        width: 210mm;
        height: 297mm; /* A4 정사이즈 강제 */
        overflow: hidden !important; /* 넘치는 내용 잘라냄 (백지 방지) */
        -webkit-print-color-adjust: exact;
    }
    .container {
        width: 100%;
        margin: 0;
        padding: 0;
    }
    
    /* 모든 불필요 요소 숨김 */
    .setup-card, .dashboard-layout, .report-controls, .screen { display: none !important; }
    
    /* 활성화된 화면만 표시 */
    .screen.active-screen {
        display: block !important;
        margin: 0;
        padding: 0;
        width: 100%;
        height: 100%;
    }
    
    /* 내부 용지 스타일 */
    .report-paper {
        box-shadow: none; border: none;
        padding: 10mm;
        width: 210mm;
        height: 297mm !important; /* A4 높이 강제 */
        margin: 0 !important;
        transform: none;
        page-break-inside: avoid;
        page-break-after: avoid; /* 페이지 나눔 방지 */
        overflow: hidden;
        
        display: flex;
        flex-direction: column;
        justify-content: space-between;
    }
    
    #pdfAreaFame {
        display: flex;
        flex-direction: column;
        height: 297mm;
    }
    
    .fame-footer {
        margin-top: auto;
        padding-bottom: 5mm;
    }

    .stock-card, .booth-item, .ranking-section { break-inside: avoid; }
    .editable-input, .editable-date, .editable-text { border-bottom: none !important; background: transparent !important; -webkit-appearance: none; appearance: none; padding: 0; margin: 0; }
    .editable-input { width: auto; min-width: 10px; text-align: right; } 
    .editable-date, .editable-text { text-align: left; }
    .ranking-table th { background: #f4f8ff !important; -webkit-print-color-adjust: exact; }
    .award-card { background: #fff !important; -webkit-print-color-adjust: exact; }
    .special-awards-container { background: #f9f9f9 !important; -webkit-print-color-adjust: exact; }
}